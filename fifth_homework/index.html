<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>

	<head>
		<title>校园墙 </title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width:device-width,
			initial-scale=1.0,
			user-scalable=no,maximum-scale=1,minimum-scale=1," />
		<link rel="stylesheet" type="text/css" href="css/index.css"/>
	</head>

	<body>
		<header class="header">
			<div class="header-container">
				<img src="img/avatar.png" />
			</div>
			<div class="name">
				<span>江财留言墙</span>
			</div>
		</header>

		<div id="form1">
			<form action="" method="post" onsubmit="return checkForm(this)">
				<br>
				<div class="row ">
					<div class="input">
						<span>姓名</span><br>
						<input type="text" name="" id="nickName" /><br>
					</div>
				</div>
				<div class="row">
					<div class="select">
						<span>学院</span><br>
						<select>
							<option value="0">软件学院</option>
							<option value="1">会计学院</option>
							<option value="2">金融学院</option>
							<option value="3">国际学院</option>
							<option value="4">外国语学院</option>
							<option value="5">体育学院</option>
							<option value="6">人文学院</option>
							<option value="7">工商学院</option>
							<option value="8">体育学院</option>
						</select><br>
					</div>
				</div>

				<div style="color: #999;margin-top: 20px;">内容：
					<textarea id="text2"></textarea>
				</div>
				<div style="color: #999;margin-top:3px;" id="txt">还可以输入<span id="number">200</span>个字</div>
				<div>
					<div class="button">
						<button type="button" onclick="checkForm(this)">发布留言</button>
					</div>
			</form>
			</div>
			<br>
			<div>
				<h3>查看留言</h3>
				<ul id="list">
					<li>
						<h6>Gary<a href="javascript:;">删除</a></h6>
						<p>春风十里，不如江财油有你~</p>
					</li>
				</ul>
			</div>

			<script type="text/javascript">
				function checkForm() {
					var nickName = document.getElementById("nickName");
					var text2 = document.getElementById('text2');
					var number = document.getElementById('number');
					var txt = document.getElementById('txt');
					var list = document.getElementById('list');
					var close = list.getElementsByTagName('a');
					var oli = document.createElement('li');
					oli.innerHTML = '<h6>' + nickName.value + '<a href="javascript:;">删除</a></h6><p>' + text2.value + '</p>';

					if(text2.value == '') {
						alert('请输入内容');
					} 
					else if(nickName.value==''){
						alert('请填写您的姓名')
					}
					else {
						if(list.children.length == 0) {
							list.appendChild(oli);
							nickName.value = "";
							text2.value = "";
							number.innerHTML = 200;
						} else {
							list.insertBefore(oli, list.children[0]);
							nickName.value = "";
							text2.value = "";
							number.innerHTML = 200;
						};
					};
					for(var i = close.length - 1; i >= 0; i--) {
						close[i].onclick = function() {
//							this.alert('确定删除？');
							list.removeChild(this.parentNode.parentNode);
						}
					};
				};
				var time = null;
				function jishu() {
					var length = text2.value.length;
					var len = 200;
					len = len - length;
					if(len < 0) {
//						text2.disabled="disabled";	//禁用
						txt.style.color = 'red';
					} else {
						txt.style.color = '#ccc';
					};
					number.innerHTML = len;
				}
				text2.onfocus = function() {
					time = setInterval(jishu, 50);
				}
				text2.onblur = function() {
					clearInterval(time);
				}
			</script>

	</body>

</html>